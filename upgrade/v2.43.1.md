# MainNet v2.43.0 -> v2.43.1 Pre-Upgrade Instructions

The following patch is necessary if you are running our oracle service.

**:exclamation: If you run your oracle service and validator node on the **SAME** machine, follow these instructions :exclamation:**

<details>
<summary> Instructions </summary>
<h3>
1. Run the following commands on your **VALIDATOR NODE** to generate ssl configurations, that will be used to authenticate GRPC server.
</h3>
<br>
    ```bash
    VALIDATOR_NODE_IP_ADDRESS="127.0.0.1"         
    ORACLE_SERVICE_NODE_IP_ADDRESS="127.0.0.1"    
    CARBON_HOME_PATH="~/.carbon"         # change to your own directory path where the .carbon directory is found
    URL=https://raw.githubusercontent.com/yan-soon/carbon-bootstrap/master/scripts/cert.sh
    bash <(wget -O - $URL) $VALIDATOR_NODE_IP_ADDRESS $ORACLE_SERVICE_NODE_IP_ADDRESS $CARBON_HOME_PATH
    ```
<br>
**:memo: If you wish to disable the gRPC authentication, follow these instructions. :memo:**
<br>

<h4>
Update your app.toml config in `~/.carbon/config/app.toml`, under `gRPC Configuration`.
</h4>
    
    Set the following field `enable-oracle-grpc-auth` to `false`:

    ```
    # EnableOracleGrpcAuth defines if the gRPC server for oracle votes communication should be ssl authenticated.
    enable-oracle-grpc-auth = false
    ```

    Restart **BOTH** your oracle service and validator node if they are running.
</details>

<br>

**:exclamation: If you run your oracle service and validator node on **DIFFERENT** machines, follow these instructions instead :exclamation:**

<details>
<summary> Instructions </summary>
<br>
<h3> 1. Run the following commands on your **VALIDATOR NODE** to generate ssl configurations, that will be used to authenticate GRPC server.
</h3>

<br>

**:exclamation: Update the following fields, `VALIDATOR_NODE_IP_ADDRESS` and `ORACLE_SERVICE_NODE_IP_ADDRESS` with the private IP address of each machine. :exclamation:**

<br>

```bash
VALIDATOR_NODE_IP_ADDRESS=""         # change to val node ip address if you run oracle service separately 
ORACLE_SERVICE_NODE_IP_ADDRESS=""    # change to oracle service node ip address if you run val node separately
CARBON_HOME_PATH="~/.carbon"         # change to your own directory path where the .carbon directory is found
URL=https://raw.githubusercontent.com/yan-soon/carbon-bootstrap/master/scripts/cert.sh
bash <(wget -O - $URL) $VALIDATOR_NODE_IP_ADDRESS $ORACLE_SERVICE_NODE_IP_ADDRESS $CARBON_HOME_PATH
```

<br>
<h3>2. Transfer the ssl certificates to your oracle node. </h3>
<br>

**:exclamation: Update the following fields, `VALIDATOR_NODE_IP_ADDRESS` and `HOST_NAME` with the private IP address and the Host Name of your validator node. :exclamation:**
<br>

**:memo: Update the file paths accordingly if your id_rsa key, and carbon home directory are stored differently. (If ssh entry to your nodes do not require verification, you can remove the -i option, can omit `-i ~/.ssh/id_rsa `) :memo:**

```bash
scp -r -i ~/.ssh/id_rsa  HOST_NAME@VALIDATOR_NODE_IP_ADDRESS:~/.carbon/config/cert ~/.carbon/config/cert 
```

<h3>
3. Starting up your oracle service
</h3>

When running your oracle service, you now have to supply an additional flag for the new grpc url:

**:exclamation: Update the following fields, `VALIDATOR_NODE_IP_ADDRESS` with the private IP address of your validator node. :exclamation:**
<br>

```
carbond oracle --grpc-url VALIDATOR_NODE_IP_ADDRESS:9090 --oracle-grpc-url VALIDATOR_NODE_IP_ADDRESS:9093
```

<br>
**:memo: If you wish to disable the gRPC authentication, follow these instructions. :memo:**
<br><br>

Update your app.toml config in `~/.carbon/config/app.toml`, under `gRPC Configuration`, on **BOTH VALIDATOR NODE AND ORACLE SERVICE NODE**
    
    Set the following field `enable-oracle-grpc-auth` to `false`:

    ```
    # EnableOracleGrpcAuth defines if the gRPC server for oracle votes communication should be ssl authenticated.
    enable-oracle-grpc-auth = false
    ```

    Restart **BOTH** your oracle service and validator node if they are running.

</details>
